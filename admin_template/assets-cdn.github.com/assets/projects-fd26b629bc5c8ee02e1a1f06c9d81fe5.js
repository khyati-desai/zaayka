define("github-rollup-projects",["invariant","github/typecast","github/debounce","github/fetch","delegated-events","github/query-selector","github/history","github/onfocus","github/remote-form","github/form","github/throttled-input","@github/sortablejs","github/menu","github/task-list","github/facebox","github/hash-change","github/hotkey","selector-observer","github/parse-html","github/navigation","github/details","github/updatable-content","github/sso"],function(e,t,n,r,o,a,i,c,u,s,l,d,m,v,f,p,h,g,j,y,b,L,k){"use strict";e=e&&e.hasOwnProperty("default")?e.default:e,t=t&&t.hasOwnProperty("default")?t.default:t,n=n&&n.hasOwnProperty("default")?n.default:n,d=d&&d.hasOwnProperty("default")?d.default:d,f=f&&f.hasOwnProperty("default")?f.default:f,p=p&&p.hasOwnProperty("default")?p.default:p,h=h&&h.hasOwnProperty("default")?h.default:h,k=k&&k.hasOwnProperty("default")?k.default:k;var C,x=function(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(o,a){try{var i=t[o](a),c=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(c).then(function(e){r("next",e)},function(e){r("throw",e)});e(c)}("next")})}},w=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},T=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),E=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,r)}if("value"in o)return o.value;var i=o.get;return void 0!==i?i.call(r):void 0},S=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},q=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},A=(C=x(regeneratorRuntime.mark(function t(n,r,o){var a,i,c,u;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a=r.get(n),i=o.get(n),e(a&&i,"Must have old and new positions for the element to animate -- null.js:28"),c=a.left-i.left,u=a.top-i.top,0!==c||0!==u){t.next=7;break}return t.abrupt("return");case 7:return t.next=9,M();case 9:return n.style.transform="translateZ(0) translate("+c+"px, "+u+"px)",n.style.transition="transform 0s",t.next=13,M();case 13:return n.style.transform="",n.style.transition="transform 500ms",t.next=17,new Promise(function(e){return n.addEventListener("transitionend",e,{once:!0})});case 17:n.style.transition="";case 18:case"end":return t.stop()}},t,this)})),function(e,t,n){return C.apply(this,arguments)});function M(){return new Promise(window.requestAnimationFrame)}function I(e){var t=new WeakMap,n=!0,r=!1,o=void 0;try{for(var a,i=e[Symbol.iterator]();!(n=(a=i.next()).done);n=!0){var c=a.value;t.set(c,c.getBoundingClientRect())}}catch(e){r=!0,o=e}finally{try{!n&&i.return&&i.return()}finally{if(r)throw o}}return t}function H(e,t){var n=I(e),r=[],o=!0,a=!1,i=void 0;try{for(var c,u=e[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var s=c.value;r.push(A(s,t,n))}}catch(e){a=!0,i=e}finally{try{!o&&u.return&&u.return()}finally{if(a)throw i}}return Promise.all(r)}var D=function(){var e=x(regeneratorRuntime.mark(function e(n,i){var c,u,s,l,d,m,v,f,p,h,g,j,y,b,L,k,C,x,w,T,E,S,q,A,M,D,R,N,W,K,$,J,G,X,Z,z,Q,Y,ee,te,ne,re,oe,ae,ie,ce,ue,se,le,de,me,ve,fe;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(_(i.message),c=n.querySelectorAll(".js-project-column"),u=I(c),s=n.getAttribute("data-url"),l=n.getAttribute("data-columns-url"),d=n.getAttribute("data-cards-url"),e.t0=i.state,e.t0){e.next=11;break}return e.next=10,r.fetchJSON(s);case 10:e.t0=e.sent;case 11:if(m=e.t0,o.fire(n,"will-update-project",m),v=document.activeElement,!F(n,m)){e.next=50;break}for(o.fire(n,"will-update-project-columns"),f={},p=document.createDocumentFragment(),h=!0,g=!1,j=void 0,e.prev=21,y=m.columns[Symbol.iterator]();!(h=(b=y.next()).done);h=!0)L=b.value,k=B(L,l),(C=k.querySelector(".js-project-column-cards"))&&(f[C.id]=C.scrollTop),p.appendChild(k);e.next=29;break;case 25:e.prev=25,e.t1=e.catch(21),g=!0,j=e.t1;case 29:e.prev=29,e.prev=30,!h&&y.return&&y.return();case 32:if(e.prev=32,!g){e.next=35;break}throw j;case 35:return e.finish(32);case 36:return e.finish(29);case 37:for(T in(x=n.querySelector(".js-new-project-column-container"))&&x.remove(),(w=a.query(n,".js-new-column-blankslate")).remove(),P(n),n.appendChild(p),x&&(n.appendChild(x),a.query(x,".js-new-column-button").classList.toggle("d-none",0===m.columns.length)),n.appendChild(w),w.classList.toggle("d-none",m.columns.length>0),V(m.columns),f)(C=t(document.getElementById(T),HTMLElement)).scrollTop=f[T];return e.next=50,H(c,u);case 50:E=n.querySelectorAll(".js-project-column-card"),S=I(E),q={},A=!0,M=!1,D=void 0,e.prev=56,R=m.columns[Symbol.iterator]();case 58:if(A=(N=R.next()).done){e.next=82;break}for(W=N.value,K=!0,$=!1,J=void 0,e.prev=63,G=W.card_ids[Symbol.iterator]();!(K=(X=G.next()).done);K=!0)Z=X.value,q[Z]=O(Z,d);e.next=71;break;case 67:e.prev=67,e.t2=e.catch(63),$=!0,J=e.t2;case 71:e.prev=71,e.prev=72,!K&&G.return&&G.return();case 74:if(e.prev=74,!$){e.next=77;break}throw J;case 77:return e.finish(74);case 78:return e.finish(71);case 79:A=!0,e.next=58;break;case 82:e.next=88;break;case 84:e.prev=84,e.t3=e.catch(56),M=!0,D=e.t3;case 88:e.prev=88,e.prev=89,!A&&R.return&&R.return();case 91:if(e.prev=91,!M){e.next=94;break}throw D;case 94:return e.finish(91);case 95:return e.finish(88);case 96:z=!0,Q=!1,Y=void 0,e.prev=99,ee=m.columns[Symbol.iterator]();case 101:if(z=(te=ee.next()).done){e.next=137;break}if(ne=te.value,(re=document.getElementById("column-"+ne.id))&&"INCLUDE-FRAGMENT"!==re.tagName){e.next=106;break}return e.abrupt("return");case 106:for((oe=re.querySelector(".js-project-column-name"))&&(oe.textContent=ne.name,(ae=re.querySelector(".js-project-column-name-field"))instanceof HTMLInputElement&&(ae.value=ne.name,ae.setAttribute("value",ne.name))),(ie=re.querySelector(".js-column-card-count"))&&(ie.textContent=ne.card_ids.length),U(ne,re),ce=document.createDocumentFragment(),ue=!0,se=!1,le=void 0,e.prev=115,de=ne.card_ids[Symbol.iterator]();!(ue=(me=de.next()).done);ue=!0)ve=me.value,ce.appendChild(q[ve]);e.next=123;break;case 119:e.prev=119,e.t4=e.catch(115),se=!0,le=e.t4;case 123:e.prev=123,e.prev=124,!ue&&de.return&&de.return();case 126:if(e.prev=126,!se){e.next=129;break}throw le;case 129:return e.finish(126);case 130:return e.finish(123);case 131:P(fe=a.query(re,".js-project-column-cards")),fe.appendChild(ce);case 134:z=!0,e.next=101;break;case 137:e.next=143;break;case 139:e.prev=139,e.t5=e.catch(99),Q=!0,Y=e.t5;case 143:e.prev=143,e.prev=144,!z&&ee.return&&ee.return();case 146:if(e.prev=146,!Q){e.next=149;break}throw Y;case 149:return e.finish(146);case 150:return e.finish(143);case 151:return o.fire(n,"update-project"),e.next=154,H(E,S);case 154:v&&document.activeElement!==v&&v.focus();case 155:case"end":return e.stop()}},e,this,[[21,25,29,37],[30,,32,36],[56,84,88,96],[63,67,71,79],[72,,74,78],[89,,91,95],[99,139,143,151],[115,119,123,131],[124,,126,130],[144,,146,150]])}));return function(t,n){return e.apply(this,arguments)}}(),R=void 0;function _(e){if(e){R&&clearTimeout(R);var t=a.query(document,".js-project-updated-message");t.textContent=e,t.classList.remove("d-none"),R=setTimeout(function(){t.textContent="",t.classList.add("d-none")},3e3)}}function P(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function B(e,t){var n="column-"+e.id,r=document.getElementById(n);if(r)return r;var o=document.createElement("include-fragment");return o.id=n,o.src=t+"/"+e.id,o}function O(e,t){var n="card-"+e,r=document.getElementById(n);if(r)return r;var o=document.createElement("include-fragment");return o.id=n,o.src=t+"/"+e,o.onerror=function(){o.remove()},o}function F(e,t){var n=Array.from(e.querySelectorAll(".js-project-column")).map(function(e){return e.getAttribute("data-id")});return t.columns.map(function(e){return String(e.id)}).join(",")!==n.join(",")}function U(e,t){var n=t.querySelector(".js-project-column-automation-footer");if(n){var r=a.query(n,".js-project-column-automation-summary");e.automation_summary&&e.purpose?(r.textContent=e.purpose,r.setAttribute("aria-label",e.automation_summary),n.classList.remove("d-none")):n.classList.add("d-none")}}function N(e,t,n,r){e.setAttribute("data-column-id",t),e.setAttribute("data-column-name",n),a.query(e,".js-column-nav-name").textContent=n,a.query(e,".js-column-nav-card-count").textContent=r}function W(e,t,n,r,o,i){var c=e.content.cloneNode(!0),u=a.query(c,".js-project-column-navigation-item");u.classList.toggle("selected",i),N(u,n,r,o);var s=t.querySelectorAll(".js-project-column-navigation-item").length+1;a.query(c,".js-column-nav-index").textContent=s.toString(),t.appendChild(c)}function K(e){var t=!0,n=!1,r=void 0;try{for(var o,a=document.querySelectorAll(".js-project-column-navigation-item")[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var i=o.value;if(e===i.getAttribute("data-column-id"))return void i.remove()}}catch(e){n=!0,r=e}finally{try{!t&&a.return&&a.return()}finally{if(n)throw r}}}function $(e){var t=e.getAttribute("data-id");if(t){var n=document.querySelector('.js-project-column-navigation-item[data-column-id="'+t+'"]');if(n)N(n,t,a.query(e,".js-project-column-name").textContent,a.query(e,".js-column-card-count").textContent)}}function V(e){var t=document.querySelector(".js-project-column-nav");if(t){var n=a.query(t,".js-column-nav-template",HTMLTemplateElement),r=t.scrollLeft,o=void 0,i=!0,c=!1,u=void 0;try{for(var s,l=document.querySelectorAll(".js-project-column-navigation-item")[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var d=s.value;d.remove(),d.classList.contains("selected")&&(o=d.getAttribute("data-column-id"))}}catch(e){c=!0,u=e}finally{try{!i&&l.return&&l.return()}finally{if(c)throw u}}var m=!0,v=!1,f=void 0;try{for(var p,h=e[Symbol.iterator]();!(m=(p=h.next()).done);m=!0){var g=p.value;W(n,t,g.id.toString(),g.name,g.card_ids.length.toString(),o===g.id.toString())}}catch(e){v=!0,f=e}finally{try{!m&&h.return&&h.return()}finally{if(v)throw f}}t.scrollLeft=r}}var J=n(D,100);function G(e){var t=!0,n=!1,r=void 0;try{for(var o,a=e.columns[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var i=o.value,c=document.getElementById("column-"+i.id);c&&U(i,c)}}catch(e){n=!0,r=e}finally{try{!t&&a.return&&a.return()}finally{if(n)throw r}}}var X=["assignee","author","is","label","repo","state","status","type"],Z=["assignee","label"],z=/[^\s:]+:("(?:\\"|.)*?"|[^\s]*)|[^\s]+/g;function Q(e,t){var n=e[t];return n||(n={tokenFilters:[],matchIfMissing:!1},e[t]=n),n}function Y(e,t,n){var r=e.tokenFilters.find(function(e){return e.token===t});r?r.negated=n:e.tokenFilters.push({token:t,negated:n}),e.matchIfMissing=!1}var ee=void 0,te=void 0;function ne(){return a.query(document,".js-card-filter-input",HTMLInputElement).value.trim().toLowerCase()}function re(){var e=ne();return te!==e&&(te=e,ee=function(e){var t=e.match(z)||[],n={},r=function(e){var t=X.find(function(t){return e.match(new RegExp("^-?"+t+":.*"))});if(t){var r=e.replace(new RegExp("^-?"+t+':\\s*"?(.*?)"?\\s*$'),"$1").replace(/\\(")/g,"$1");r.length>0&&Y(Q(n,t),r,e.startsWith("-"))}else{var o=Z.find(function(t){return e==="no:"+t});o?Q(n,o).matchIfMissing=!0:e.length>0&&Y(Q(n,"title"),e,!1)}},o=!0,a=!1,i=void 0;try{for(var c,u=t[Symbol.iterator]();!(o=(c=u.next()).done);o=!0)r(c.value)}catch(e){a=!0,i=e}finally{try{!o&&u.return&&u.return()}finally{if(a)throw i}}return n}(e)),ee}function oe(e,t){for(var n in t){var r=e.getAttribute("data-card-"+n)||"",o=[];""!==r.trim()&&(o=JSON.parse(r));var a=t[n];if(a.matchIfMissing){if(o.length>0)return!1}else{var i=!0,c=!1,u=void 0;try{for(var s,l=a.tokenFilters[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var d=s.value;if("title"===n){if(!ae(d.token,o))return!1}else{var m=(v=d.token,-1!==o.indexOf(v));if(d.negated){if(m&&o.length>0)return!1}else if(!m)return!1}}}catch(e){c=!0,u=e}finally{try{!i&&l.return&&l.return()}finally{if(c)throw u}}}}var v;return!0}function ae(e,t){return t.some(function(t){return t.startsWith(e)})}function ie(){var e=ne(),t=!0,n=!1,r=void 0;try{for(var o,i=document.querySelectorAll(".js-project-columns-container .js-project-column")[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var c=o.value,u=a.query(c,".js-filtered-column-card-count");if(e.length>0){var s=c.querySelectorAll(".js-project-column-card:not(.d-none)").length;u.textContent=s.toString()+" result"+(1!==s?"s":"")}u.classList.toggle("d-none",0===e.length)}}catch(e){n=!0,r=e}finally{try{!t&&i.return&&i.return()}finally{if(n)throw r}}}function ce(e){var t=re(),n=oe(e,t);if(!n){var r=!0,o=!1,a=void 0;try{for(var i,c=e.querySelectorAll(".js-issue-note, .js-issue-note-reference")[Symbol.iterator]();!(r=(i=c.next()).done);r=!0){if(n=oe(i.value,t))break}}catch(e){o=!0,a=e}finally{try{!r&&c.return&&c.return()}finally{if(o)throw a}}}e.classList.toggle("d-none",!n)}function ue(){var e,t,n,r,o=a.query(document,".js-card-filter-input",HTMLInputElement),c=ne();a.query(document,".js-card-filter-clear").classList.toggle("d-none",0===c.length),e=o.name,t=c,n=new URL(window.location.toString()),r=new URLSearchParams(n.search.slice(1)),""===t?r.delete(e):r.set(e,t),n.search=r.toString(),i.replaceState(i.getState(),document.title,n.toString()),function(e,t){var n=!0,r=!1,o=void 0;try{for(var a,i=document.querySelectorAll(".js-project-fullscreen-link")[Symbol.iterator]();!(n=(a=i.next()).done);n=!0){var c=a.value,u=new URL(c.getAttribute("href")||"",window.location.origin),s=new URLSearchParams(u.search.slice(1));""===t?s.delete(e):s.set(e,t),u.search=s.toString(),c.setAttribute("href",u.toString())}}catch(e){r=!0,o=e}finally{try{!n&&i.return&&i.return()}finally{if(r)throw o}}}(o.name,c)}function se(){var e=!0,t=!1,n=void 0;try{for(var r,o=document.querySelectorAll(".js-project-columns-container .js-project-column-card")[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){ce(r.value)}}catch(e){t=!0,n=e}finally{try{!e&&o.return&&o.return()}finally{if(t)throw n}}ie(),ue()}var le=/:"[^"]*"?$/,de=/(^|\s+)[^\s:]+$/,me=/^(\s|$)/;function ve(e){!function(e){var t=e.value.slice(0,e.selectionEnd),n=e.value.slice(e.selectionEnd),r=0===e.value.trim().length;if(le.test(t))return!1;var o=de.test(t)&&me.test(n);return r||o}(e)?he():function(e){var n=document.querySelector(".js-card-filter-suggester");if(n instanceof HTMLElement){n.classList.remove("d-none");var r=e.value.slice(0,e.selectionEnd),o=(r.match(pe)||[])[0],a=t(n.querySelector(".js-card-filter-suggester-helper-container"),HTMLElement),i=t(a.querySelector(".js-card-filter-suggester-helper"),HTMLElement);fe.test(e.value)?(i.textContent=e.value,a.classList.remove("d-none")):a.classList.add("d-none");var c=t(n.querySelector(".js-card-filter-suggestions-header"),HTMLElement),u=!1,s=!0,l=!1,d=void 0;try{for(var m,v=n.querySelectorAll(".js-card-filter-suggestion")[Symbol.iterator]();!(s=(m=v.next()).done);s=!0){var f=m.value,p=f.getAttribute("data-value");p&&p.startsWith(o)?(f.classList.remove("d-none"),u=!0):(f.classList.add("d-none"),f.classList.remove("navigation-focus"))}}catch(e){l=!0,d=e}finally{try{!s&&v.return&&v.return()}finally{if(l)throw d}}c.classList.toggle("d-none",!u)}}(e)}var fe=/(^|\s)[^\s:]+$/,pe=/\S*$/;function he(){var e=document.querySelector(".js-card-filter-suggester");e instanceof HTMLElement&&e.classList.add("d-none")}function ge(e){var t=a.query(document,".js-card-filter-input",HTMLInputElement),n=t.value,r=e,o=!0;n.indexOf(r)>=0?(o=!1,r=n.replace(r,"")):n.length&&(r=n.trim()+" "+r),t.value=r,function(e,t){var n=!0,r=!1,o=void 0;try{for(var a,i=document.querySelectorAll(".js-card-filter[data-card-filter]")[Symbol.iterator]();!(n=(a=i.next()).done);n=!0){var c=a.value;c.getAttribute("data-card-filter")===t&&c.setAttribute("aria-pressed",e.toString())}}catch(e){r=!0,o=e}finally{try{!n&&i.return&&i.return()}finally{if(r)throw o}}}(o,e),se()}var je=!navigator.userAgent.match(/Macintosh/);function ye(e){switch(e){case" ":return"Space";case"ArrowUp":case"k":case"K":return"up";case"ArrowDown":case"j":case"J":return"down";case"ArrowLeft":case"h":case"H":return"left";case"ArrowRight":case"l":case"L":return"right";case"Enter":return"confirm";case"Escape":return"cancel";default:return e}}var be=function(){function e(t,n){w(this,e),this.item=t,this.onDone=n,this.moved=!1,this.moveInProgress=!1,this.blurring=!1,this.blurListener=this.handleBlur.bind(this),this.item.addEventListener("blur",this.blurListener),this.item.classList.add("moving")}return T(e,[{key:"handleBlur",value:function(e){!this.moveInProgress&&e.relatedTarget&&(this.blurring=!0,this.cancel())}},{key:"isMetaKeyPressed",value:function(e){return je?e.ctrlKey:e.metaKey}},{key:"inSearchColumn",value:function(){return null!=this.item.closest(".js-project-search-results")}},{key:"inPendingColumn",value:function(){return null!=this.item.closest(".js-project-pending-cards")}},{key:"findColumn",value:function(e){return e?document.querySelector('.js-project-column[data-id="'+e+'"]'):null}},{key:"findCard",value:function(e){if(!e)return null;var t=document.querySelector('.js-project-column-card[data-card-id="'+e+'"]');return t||(t=document.querySelector('.js-project-column-card[data-content-id="'+e+'"]')),t}},{key:"isColumn",value:function(e){return null!=e&&e.classList.contains("js-project-column")}},{key:"getColumn",value:function(){return this.item.closest(".js-project-column")}},{key:"getColumnName",value:function(){var e=this.getColumn(),t=e&&e.querySelector(".js-project-column-name");return t?t.textContent:""}},{key:"getColumnsContainer",value:function(){return a.query(document,".js-project-columns-container")}},{key:"getNextColumn",value:function(){var e=this.getColumn();if(e){var t=e.nextElementSibling;if(this.isColumn(t))return t}}},{key:"getPreviousColumn",value:function(){var e=this.getColumn();if(e){var t=e.previousElementSibling;if(this.isColumn(t))return t}}},{key:"getFirstColumn",value:function(){return this.getColumnsContainer().querySelector(".js-project-column")}},{key:"getLastColumn",value:function(){var e=this.getColumnsContainer().querySelectorAll(".js-project-column");return e[e.length-1]}},{key:"getCardID",value:function(e){return e&&(e.getAttribute("data-card-id")||e.getAttribute("data-content-id"))||""}},{key:"getColumnID",value:function(e){return e&&e.getAttribute("data-id")||""}},{key:"isMoving",value:function(e){return e===this.item}},{key:"updateAriaLabel",value:function(){}},{key:"moveTransaction",value:function(e){try{this.moveInProgress=!0,e(this.item),this.blurring||(this.updateAriaLabel(),this.item.focus())}finally{this.moved=!0,this.moveInProgress=!1}}},{key:"done",value:function(){this.item.removeEventListener("blur",this.blurListener),this.item.classList.remove("moving"),this.item.removeAttribute("aria-label"),this.onDone()}},{key:"cancel",value:function(){}}]),e}(),Le=function(t){function n(e,t,r){w(this,n);var o=q(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,r));return o.moveCard=t,o.pendingCard=o.inPendingColumn(),o.searchCard=o.inSearchColumn(),o.columnID=o.getColumnID(o.getColumn()),o.previousCardID=o.getCardID(e.previousElementSibling),o.keydownListener=o.handleKeydown.bind(o),o.item.addEventListener("keydown",o.keydownListener),o.updateStartListener=o.handleUpdateStart.bind(o),o.getColumnsContainer().addEventListener("will-update-project",o.updateStartListener),o.updateEndListener=o.handleUpdateEnd.bind(o),o.getColumnsContainer().addEventListener("update-project",o.updateEndListener),o}return S(n,be),T(n,[{key:"updateAriaLabel",value:function(){var e=this.getCardIndex(),t=e>=0?"to position "+(e+1)+" of "+this.getCardCount():"",n="in "+this.getColumnName()+" column";this.item.setAttribute("aria-label",("Moved card "+t+" "+n).trim())}},{key:"handleUpdateStart",value:function(t){e(t instanceof CustomEvent,"null.js:243");var n=this.getColumn();if(n)if(this.searchCard||this.updatePreviousPosition(t.detail)){var r=this.getColumnID(n);this.isColumnInState(t.detail,r)?this.updateSnapshot={columnID:r,indexInColumn:this.getCardIndex()}:this.done()}else this.done();else this.done()}},{key:"handleUpdateEnd",value:function(){var e=this.updateSnapshot;if(this.updateSnapshot=null,e&&this.getColumn()){var t=this.findCard(this.getCardID(this.item)),n=this.getColumnCards(this.findColumn(e.columnID));if(t&&n){this.moveToColumn(n);var r=n.children[e.indexInColumn];t!==r&&this.moveToBeforeCard(n,r)}}else this.done()}},{key:"handleKeydown",value:function(e){var t=this.isMetaKeyPressed(e);switch(ye(e.key)){case"up":t?this.moveToTop():this.moveUp(),e.preventDefault();break;case"down":t?this.moveToBottom():this.moveDown(),e.preventDefault();break;case"left":t?this.moveToFirstColumn(e.shiftKey):this.moveLeft(e.shiftKey),e.preventDefault();break;case"right":t?this.moveToLastColumn(e.shiftKey):this.moveRight(e.shiftKey),e.preventDefault();break;case"confirm":this.confirm(),e.preventDefault();break;case"cancel":this.cancel(),e.preventDefault()}}},{key:"updatePreviousPosition",value:function(e){if(!e||!e.columns)return!1;var t=this.getCardID(this.item),n=!0,r=!1,o=void 0;try{for(var a,i=e.columns[Symbol.iterator]();!(n=(a=i.next()).done);n=!0)for(var c=a.value,u=0;u<c.card_ids.length;u++)if(t===c.card_ids[u].toString())return this.previousCardID=c.card_ids[u-1],this.columnID=c.id,!0}catch(e){r=!0,o=e}finally{try{!n&&i.return&&i.return()}finally{if(r)throw o}}return!1}},{key:"isColumnInState",value:function(e,t){if(!e||!e.columns)return!1;var n=!0,r=!1,o=void 0;try{for(var a,i=e.columns[Symbol.iterator]();!(n=(a=i.next()).done);n=!0){if(t===a.value.id.toString())return!0}}catch(e){r=!0,o=e}finally{try{!n&&i.return&&i.return()}finally{if(r)throw o}}return!1}},{key:"getCardIndex",value:function(){var e=this.getColumnCards(this.getColumn());return e?Array.from(e.children).indexOf(this.item):-1}},{key:"getCardCount",value:function(){var e=this.getColumnCards(this.getColumn());return e?e.querySelectorAll(".js-project-column-card").length:0}},{key:"getColumnCards",value:function(e){return null!=e?e.querySelector(".js-project-column-cards"):null}},{key:"moveToBeforeCard",value:function(e,t){this.moveTransaction(function(n){e.insertBefore(n,t)})}},{key:"moveToColumn",value:function(e){this.moveTransaction(function(t){e.appendChild(t)})}},{key:"moveUp",value:function(){var e=this.item.previousElementSibling,t=this.getColumnCards(this.getColumn());e&&t&&this.moveToBeforeCard(t,e)}},{key:"moveToTop",value:function(){var e=this.getColumnCards(this.getColumn());e&&this.moveTransaction(function(t){e.prepend(t)})}},{key:"moveDown",value:function(){var e=this.item.nextElementSibling,t=this.getColumnCards(this.getColumn());if(e&&t){var n=e.nextElementSibling;n?this.moveToBeforeCard(t,n):this.moveToBottom()}else this.moveToBottom()}},{key:"moveToBottom",value:function(){var e=this.getColumnCards(this.getColumn());e&&this.moveToColumn(e)}},{key:"moveToFirstColumn",value:function(e){var t=this.getColumnCards(this.getFirstColumn());t&&(this.moveToColumn(t),e&&this.moveToTop())}},{key:"moveToLastColumn",value:function(e){var t=this.getColumnCards(this.getLastColumn());t&&(this.moveToColumn(t),e&&this.moveToTop())}},{key:"moveLeft",value:function(e){var t=this.getColumnCards(this.inSearchColumn()?this.getLastColumn():this.getPreviousColumn());t&&(this.moveToColumn(t),e&&this.moveToTop())}},{key:"moveRight",value:function(e){var t=this.getColumnCards(this.getNextColumn());t&&(this.moveToColumn(t),e&&this.moveToTop())}},{key:"done",value:function(){E(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"done",this).call(this),this.item.removeEventListener("keydown",this.keydownListener),this.getColumnsContainer().removeEventListener("will-update-project",this.updateStartListener),this.getColumnsContainer().removeEventListener("update-project",this.updateEndListener)}},{key:"confirm",value:function(){if(this.moved){var e=this.findColumn(this.columnID);this.pendingCard&&!e&&(e=document.querySelector(".js-project-pending-cards-container.js-project-column")),this.moveCard(this.item,e,{keyboardMove:!0})}this.done()}},{key:"cancel",value:function(){var e=void 0,t=void 0;if(this.moved)if(this.previousCardID){var n=this.findCard(this.previousCardID);n&&(e=n.closest(".js-project-column-cards"),t=n.nextElementSibling)}else this.columnID?(e=this.getColumnCards(this.findColumn(this.columnID)))&&(t=e.firstElementChild):this.pendingCard?(e=document.querySelector(".js-project-column-cards.js-project-pending-cards"))&&(t=e.firstElementChild):this.searchCard&&(e=document.querySelector(".js-project-column-cards.js-project-search-cards"))&&(t=e.firstElementChild);e&&(t?this.moveToBeforeCard(e,t):this.moveToColumn(e)),this.done()}}]),n}(),ke=function(e){function t(e,n,r){w(this,t);var o=q(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return o.moveColumn=n,o.nextColumnID=o.getColumnID(e.nextElementSibling),o.keydownListener=o.handleKeydown.bind(o),o.item.addEventListener("keydown",o.keydownListener),o.updateListener=o.done.bind(o),o.getColumnsContainer().addEventListener("will-update-project-columns",o.updateListener),o}return S(t,be),T(t,[{key:"updateAriaLabel",value:function(){var e=this.getColumnIndex(),t=e>=0?"to position "+(e+1)+" of "+this.getColumnCount():"";this.item.setAttribute("aria-label",("Moved "+this.getColumnName()+" column "+t).trim())}},{key:"getColumnIndex",value:function(){var e=this.getColumnsContainer().querySelectorAll(".js-project-column");return Array.from(e).indexOf(this.item)}},{key:"getColumnCount",value:function(){return this.getColumnsContainer().querySelectorAll(".js-project-column").length}},{key:"handleKeydown",value:function(e){var t=this.isMetaKeyPressed(e);switch(ye(e.key)){case"left":t?this.moveToFirstColumn():this.moveLeft(),e.preventDefault();break;case"right":t?this.moveToLastColumn():this.moveRight(),e.preventDefault();break;case"confirm":this.confirm(),e.preventDefault();break;case"cancel":this.cancel(),e.preventDefault()}}},{key:"insertBefore",value:function(e){var t=this.getColumnsContainer();this.moveTransaction(function(n){t.insertBefore(n,e)})}},{key:"moveLeft",value:function(){var e=this.getPreviousColumn();e&&this.insertBefore(e)}},{key:"moveRight",value:function(){var e=this.getNextColumn();if(e){var t=e.nextElementSibling;t&&this.isColumn(t)?this.insertBefore(t):this.moveToLastColumn()}else this.moveToLastColumn()}},{key:"moveToFirstColumn",value:function(){var e=this.getFirstColumn();e&&this.insertBefore(e)}},{key:"moveToLastColumn",value:function(){var e=this.getLastColumn();if(e){var t=e.nextElementSibling;t&&this.insertBefore(t)}}},{key:"done",value:function(){E(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"done",this).call(this),this.item.removeEventListener("keydown",this.keydownListener),this.getColumnsContainer().removeEventListener("will-update-project-columns",this.updateListener)}},{key:"confirm",value:function(){this.moved&&this.moveColumn(this.item,{keyboardMove:!0}),this.done()}},{key:"cancel",value:function(){if(this.moved){var e=this.findColumn(this.nextColumnID);e?this.insertBefore(e):this.moveToLastColumn()}this.done()}}]),t}();var Ce,xe,we,Te,Ee,Se,qe,Ae,Me,Ie,He,De,Re,_e,Pe,Be=(Ce=x(regeneratorRuntime.mark(function e(t){var n,o,i,c,u,s,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.getAttribute("data-results-url")||"",(o=a.closest(t,".js-select-menu")).classList.add("is-sending"),i=o.querySelector(".js-select-menu-tab.selected"),c=i?"&search_in="+(i.getAttribute("data-search-in")||""):"",e.next=7,r.fetchSafeDocumentFragment(document,n+"?query="+t.value+c);case 7:u=e.sent,o.classList.remove("is-sending"),(s=a.query(o,".js-project-picker-results")).innerHTML="",s.append(u),s.style.display="block",(l=t.closest(".js-active-navigation-container"))&&y.refocus(l);case 15:case"end":return e.stop()}},e,this)})),function(e){return Ce.apply(this,arguments)}),Oe=(xe=x(regeneratorRuntime.mark(function t(n){var o,i,c,u,l,d,m,v,f,p,h;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(p=function(e){l.disabled=e,u.classList.toggle("d-none",!e),s.changeValue(d,!e)},o=document.querySelector("#facebox .js-project-column-automation")){t.next=4;break}return t.abrupt("return");case 4:return i=a.closest(o,".js-column-settings-form"),c=a.query(o,".js-project-automation-options"),u=a.query(i,".js-project-autmoation-loader"),l=a.query(i,".js-column-purpose-button",HTMLButtonElement),d=a.query(i,".js-column-purpose-value:checked",HTMLInputElement),m=o.getAttribute("data-src"),e(m,"null.js:898"),v=o.getAttribute("data-id")||"",f=m+"?id="+v,null!=n&&(f+="&purpose="+n),c.innerHTML="",p(!0),h=void 0,t.prev=17,t.next=20,r.fetchSafeDocumentFragment(document,f);case 20:h=t.sent,t.next=25;break;case 23:t.prev=23,t.t0=t.catch(17);case 25:h&&c.appendChild(h),p(!1);case 27:case"end":return t.stop()}},t,this,[[17,23]])})),function(e){return xe.apply(this,arguments)}),Fe=(we=x(regeneratorRuntime.mark(function n(o){var i,c,u,s,l,d,m;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return i=o.currentTarget.querySelector(".js-dropdown-details"),c=o.currentTarget.querySelector(".js-card-status-dropdown-menu")||o.currentTarget.closest(".js-card-status-dropdown-menu"),e(c instanceof HTMLElement,"null.js:1210"),u=a.query(c,".js-card-status-loader"),s=a.query(c,".js-card-status-loading"),l=a.query(c,".js-card-status-error"),d=u.getAttribute("data-contents-url"),e(d,"null.js:1216"),s.classList.remove("d-none"),l.classList.add("d-none"),m=void 0,n.prev=11,n.next=14,k();case 14:return n.next=16,r.fetchSafeDocumentFragment(document,d);case 16:m=n.sent,n.next=23;break;case 19:n.prev=19,n.t0=n.catch(11),s.classList.add("d-none"),l.classList.remove("d-none");case 23:m&&(u.replaceWith(m),a.query(c,".js-details-container").classList.add("open"),i&&pt(t(document.body,HTMLElement),c,i));case 24:case"end":return n.stop()}},n,this,[[11,19]])})),function(e){return we.apply(this,arguments)}),Ue=void 0,Ne=document.querySelector(".js-client-uid");function We(e,t){var n;u.remoteForm(e,(n=x(regeneratorRuntime.mark(function e(n,r,o){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t(n,r,o);case 3:e.next=11;break;case 5:if(e.prev=5,e.t0=e.catch(0),!e.t0.response){e.next=10;break}return e.next=10,f({div:"#project-update-error"});case 10:throw e.t0;case 11:case"end":return e.stop()}},e,this,[[0,5]])})),function(e,t,r){return n.apply(this,arguments)}))}function Ke(e,t){var n=a.query(e,".js-column-card-count"),r=parseInt(n.textContent.trim())+t;n.textContent=r.toString();var o=e.getAttribute("data-id");if(o){var i=document.querySelector('.js-project-column-navigation-item[data-column-id="'+o+'"] .js-column-nav-card-count');i&&(i.textContent=r.toString())}}function $e(e,n){var r=t(e.elements.namedItem("keyboard_move"),HTMLInputElement);n&&!0===n.keyboardMove?r.value="true":r.value=""}function Ve(e,n,r){var o=e.closest(".js-project-column");if(o){Ke(o,1),n&&(!function(e){e.classList.contains("js-project-pending-cards-container")&&0===e.querySelectorAll(".js-project-column-card").length&&e.remove()}(n),Ke(n,-1)),function(){var e=document.querySelector(".js-search-cards-next-page");if(e instanceof HTMLInputElement){var t=null==document.querySelector(".js-project-search-cards .js-project-column-card");t&&(e.value="1")}}();var i=a.query(o,".js-project-content-form",HTMLFormElement);i.reset(),function(e,n){var r=t(e.elements.namedItem("card_id"),HTMLInputElement),o=t(e.elements.namedItem("content_id"),HTMLInputElement),a=t(e.elements.namedItem("content_type"),HTMLInputElement);if(!n)return r.value="",o.value="",void(a.value="");var i=n.getAttribute("data-card-id");i?(r.value=i,o.value="",a.value=""):(r.value="",o.value=n.getAttribute("data-content-id")||"",a.value=n.getAttribute("data-content-type")||""),t(e.elements.namedItem("client_uid"),HTMLInputElement).value=Ue}(i,e);var c=e.previousElementSibling,u=t(i.elements.namedItem("previous_card_id"),HTMLInputElement);u.value=c&&c.getAttribute("data-card-id")||"",$e(i,r),s.submit(i)}}function Je(e){var n=e.item;if(!n.closest(".js-project-triage-pane")){var r=e.from;Ve(n,r&&r.closest(".js-project-column")),n.hasAttribute("tabindex")&&t(n,HTMLElement).focus()}}function Ge(e,n){var r=a.query(document,".js-reorder-columns-form",HTMLFormElement);t(r.elements.namedItem("column_id"),HTMLInputElement).value=e.getAttribute("data-id")||"";var o=e.previousElementSibling;o&&(t(r.elements.namedItem("previous_column_id"),HTMLInputElement).value=o.getAttribute("data-id")||""),$e(r,n),s.submit(r)}function Xe(e){if(e.related&&!e.related.matches(".js-project-column"))return!1}function Ze(e){var n=e.item;Ge(n),n.hasAttribute("tabindex")&&t(n,HTMLElement).focus()}function ze(e,t,n){var r=void 0;return e&&(r=document.querySelector('.js-project-column-card[data-card-id="'+e+'"]')),!r&&t&&n&&(r=document.querySelector('.js-project-column-card[data-content-type="'+n+'"][data-content-id="'+t+'"]')),r}function Qe(e){try{return e&&e.json&&"note_already_converted_to_issue"===e.json.error_code}catch(e){return!1}}function Ye(e){"Escape"===e.key&&(m.deactivate(e.currentTarget),e.preventDefault(),e.stopImmediatePropagation())}function et(e){var t=a.query(document,".js-new-project-column-container"),n=a.query(document,".js-new-column-blankslate"),r=a.query(t,".js-new-column-button");n.classList.toggle("d-none",!e),r.classList.toggle("d-none",e),e&&tt(".js-project-triage-pane",!1)}function tt(e,t){var n=!0,r=!1,o=void 0;try{for(var a,i=document.querySelectorAll(".js-project-header, .js-project-columns, .js-project-pane, .js-project-small-footer")[Symbol.iterator]();!(n=(a=i.next()).done);n=!0){a.value.classList.toggle("hide-sm",t)}}catch(e){r=!0,o=e}finally{try{!n&&i.return&&i.return()}finally{if(r)throw o}}var c=document.querySelector(e);c&&(c.classList.toggle("d-none",!t),c.classList.toggle("hide-sm",!t))}function nt(e,t){var n=a.closest(e.currentTarget,".js-project-triage-pane"),r=a.query(n,".js-project-search-form",HTMLFormElement);a.query(r,".js-show-triage-field",HTMLInputElement).value=t?"show":"",s.submit(r)}function rt(){var e=document.querySelectorAll(".js-project-search-cards .js-project-column-card"),t={},n=!0,r=!1,o=void 0;try{for(var a,i=e[Symbol.iterator]();!(n=(a=i.next()).done);n=!0){var c=a.value,u=c.getAttribute("data-content-id");u&&(t.hasOwnProperty(u)&&c.remove(),t[u]=!0)}}catch(e){r=!0,o=e}finally{try{!n&&i.return&&i.return()}finally{if(r)throw o}}}function ot(e){var t=e.closest(".js-details-container");t&&t.classList.remove("open","Details--on")}function at(e){"Escape"===h(e)&&ot(e.currentTarget)}function it(e){var n=e.closest(".js-project-column");if(n){var r=e.value;if(e.setAttribute("data-preview-text",r),/(gh-|issues\/|pull\/|projects\/|discussions\/|#)\d+/.test(r)){var o=a.query(n,".js-preview-note-form",HTMLFormElement);t(o.elements.namedItem("note"),HTMLInputElement).value=r,s.submit(o)}else a.query(n,".js-note-preview").innerHTML=""}}function ct(e,t){a.query(e,".js-project-column-cards").prepend(t),Ke(e,1)}function ut(t,n){var r=n.querySelector("*");if(!(!r||!r.classList.contains("js-note-form-container"))){var a=t.closest(".js-note-form-container");e(a,"null.js:799"),a.replaceWith(n)}else{var i=t.getAttribute("data-card-id")||"",c=document.getElementById("card-"+i);c&&c.replaceWith(n),o.fire(document,"facebox:close")}}function st(e){v.enableTaskList(e);var t=a.query(e,".js-task-list-field",HTMLTextAreaElement);t.defaultValue=t.value;var n=!0,r=!1,o=void 0;try{for(var i,c=a.querySelectorAll(e,".task-list-item-checkbox",HTMLInputElement)[Symbol.iterator]();!(n=(i=c.next()).done);n=!0){var u=i.value;u.defaultChecked=u.checked}}catch(e){r=!0,o=e}finally{try{!n&&c.return&&c.return()}finally{if(r)throw o}}}Ne&&(Ue=Ne.getAttribute("data-uid")||""),o.on("card:testAction",".js-project-column-card",function(e){Je({item:e.currentTarget})}),o.on("column:testAction",".js-project-column",function(e){Ze({item:e.currentTarget})}),We(".js-project-update-card",(Te=x(regeneratorRuntime.mark(function e(t,n){var r,o,i,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.html();case 2:r=e.sent,o=a.query(r.html,"*"),i=ze(o.getAttribute("data-card-id"),o.getAttribute("data-content-id"),o.getAttribute("data-content-type")),c=!(!i||i!==i.ownerDocument.activeElement),i&&i.replaceWith(o),c&&o.focus();case 8:case"end":return e.stop()}},e,this)})),function(e,t){return Te.apply(this,arguments)})),We(".js-convert-note-to-issue-form",(Ee=x(regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.text();case 3:o.fire(document,"facebox:close"),e.next=15;break;case 6:if(e.prev=6,e.t0=e.catch(0),!Qe(e.t0.response)){e.next=14;break}(r=a.query(t,".js-convert-note-error-container")).innerHTML="",r.append(j.parseHTML(document,e.t0.response.json.error_html)),e.next=15;break;case 14:throw e.t0;case 15:case"end":return e.stop()}},e,this,[[0,6]])})),function(e,t){return Ee.apply(this,arguments)})),g.observe(".js-convert-note-to-issue-form .js-menu-container, .js-menu-container.js-column-purpose-selector",{add:function(e){e.addEventListener("keydown",Ye)},remove:function(e){e.removeEventListener("keydown",Ye)}}),o.on("click",".js-add-project-description",x(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f({div:"#edit-project"});case 2:t=e.sent,a.query(t,"#edit-project-name").removeAttribute("autofocus"),a.query(t,"#edit-project-body").setAttribute("autofocus","");case 5:case"end":return e.stop()}},e,this)}))),o.on("click",".js-project-settings-menu-item",(Se=x(regeneratorRuntime.mark(function e(t){var n,r,o,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.currentTarget.getAttribute("data-facebox-target"),r=a.closest(t.currentTarget,".js-project-settings-menu"),e.next=4,f({div:n});case 4:o=e.sent,r.classList.toggle("active",!1),(i=o.querySelector(".js-project-target-owner-search"))&&i.focus();case 8:case"end":return e.stop()}},e,this)})),function(e){return Se.apply(this,arguments)})),o.on("click",".js-project-target-owner",function(t){var n=t.currentTarget.getAttribute("data-owner-type");e(n,"null.js:333");var r="repository"===n,o=a.query(document,"#facebox");(a.query(o,".js-project-clone-visibility").classList.toggle("d-none",r),r)&&(a.query(o,".js-project-clone-private",HTMLInputElement).checked=!0)}),o.on("click",".js-refresh-project",function(){window.location.reload()}),We(".js-create-project-column",(qe=x(regeneratorRuntime.mark(function e(t,n){var r,i,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.html();case 2:r=e.sent,i=a.query(r.html,"*"),i.classList.contains("js-column-form-container")?(a.closest(t,".js-column-form-container").replaceWith(i),Oe()):(a.query(document,".js-new-project-column-container").before(r.html),o.fire(document,"facebox:close"),u=i,void 0,(s=document.querySelector(".js-project-column-nav"))&&W(a.query(s,".js-column-nav-template",HTMLTemplateElement),s,u.getAttribute("data-id")||"",a.query(u,".js-project-column-name").textContent,a.query(u,".js-column-card-count").textContent,!0),(c=i.getAttribute("data-id"))&&(jt(c),gt(c),yt()),a.query(document,".js-new-column-blankslate").classList.contains("d-none")||et(!1));case 6:case"end":return e.stop()}var u,s},e,this)})),function(e,t){return qe.apply(this,arguments)})),We(".js-update-project-column",(Ae=x(regeneratorRuntime.mark(function t(n,r){var i,c,u;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.html();case 2:i=t.sent,c=a.query(i.html,"*"),c.classList.contains("js-column-form-container")?(a.closest(n,".js-column-form-container").replaceWith(c),Oe()):(u=n.getAttribute("data-column-id"),e(u,"null.js:396"),document.querySelector('.js-project-column[data-id="'+u+'"]').replaceWith(c),$(c),o.fire(document,"facebox:close"));case 6:case"end":return t.stop()}},t,this)})),function(e,t){return Ae.apply(this,arguments)})),We(".js-delete-project-column",(Me=x(regeneratorRuntime.mark(function e(t,n){var r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.text();case 2:if(r=t.getAttribute("data-column-id")){e.next=5;break}throw new Error("Unable to get attribute `data-column-id`");case 5:i=a.querySelectorAll(document,".js-project-column",HTMLElement),a.query(document,'.js-project-column[data-id="'+r+'"]').remove(),o.fire(document,"facebox:close"),K(r),1===i.length&&et(!0);case 10:case"end":return e.stop()}},e,this)})),function(e,t){return Me.apply(this,arguments)})),g.observe(".js-project-column-card, .js-project-column",function(e){e.id===document.location.hash.substr(1)&&setTimeout(function(){document.querySelector(".js-project-page-mobile")||e.focus()},1)}),We(".js-delete-card",(Ie=x(regeneratorRuntime.mark(function e(t,n){var r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.text();case 2:(r=t.closest(".js-project-column"))&&Ke(r,-1),o=t.closest(".js-project-triage-pane"),a.closest(t,".js-project-column-card").remove(),o&&s.submit(a.query(o,".js-project-search-form",HTMLFormElement));case 8:case"end":return e.stop()}},e,this)})),function(e,t){return Ie.apply(this,arguments)})),p(function(e){var n=e.target;n&&(n.matches(".js-project-column-card")?t(n,HTMLElement).focus():n.matches(".js-project-column")&&(jt(n.getAttribute("data-id")||""),yt()))}),o.on("click",".js-show-project-triage",function(){tt(".js-project-menu-pane",!0),tt(".js-project-triage-pane",!0);var e=a.query(document,".js-project-triage-pane");e.addEventListener("animationend",function(){a.query(e,".js-project-triage-search-text",HTMLInputElement).focus()},{once:!0})}),o.on("click",".js-show-project-menu",function(){!function(){var t=document.querySelector(".js-project-activity-results");if(t){var n=t.getAttribute("data-project-activity-url");e(n,"`data-project-activity-url` must exist -- null.js:503");var r=new URL(n,window.location.origin);t.setAttribute("src",r.toString())}}(),tt(".js-project-triage-pane",!1),tt(".js-project-menu-pane",!0)}),o.on("click",".js-hide-project-menu",function(){tt(".js-project-menu-pane",!1),tt(".js-project-triage-pane",!1)}),o.on("click",".js-show-triage",function(e){nt(e,!0)}),o.on("click",".js-hide-triage",function(e){nt(e,!1)}),We(".js-project-search-form",(He=x(regeneratorRuntime.mark(function e(t,n){var r,o,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.classList.add("loading"),e.next=3,n.html();case 3:r=e.sent,o=a.closest(t,".js-project-triage-pane"),(i=a.query(o,".js-project-search-results")).innerHTML="",i.append(r.html),t.classList.remove("loading");case 9:case"end":return e.stop()}},e,this)})),function(e,t){return He.apply(this,arguments)})),We(".js-project-activity-form",(De=x(regeneratorRuntime.mark(function t(n,r){var o,i,c;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.html();case 2:o=t.sent,i=a.closest(n,".js-project-activity-pane"),(c=i.querySelector(".js-project-activity-container"))&&(e(c instanceof HTMLElement,"null.js:565"),c.innerHTML="",c.append(o.html)),i&&(e(i instanceof HTMLElement,"null.js:571"),i.classList.remove("Details--on"));case 7:case"end":return t.stop()}},t,this)})),function(e,t){return De.apply(this,arguments)})),g.observe(".js-project-column-card",function(e){if(e.getAttribute("data-card-id")){var t=e.getAttribute("data-content-type"),n=e.getAttribute("data-content-id"),r=document.getElementById("card-"+t+"-"+n);r&&r.remove()}}),g.observe(".js-more-search-cards-form",{add:function(e){e.addEventListener("page:loaded",rt)},remove:function(e){e.removeEventListener("page:loaded",rt)}}),o.on("click",".js-dismiss-note-form-button",function(e){ot(e.currentTarget)}),c.onFocus(".js-note-text",function(e){var n=t(e,HTMLTextAreaElement);l.addThrottledInputEventListener(n,it),n.addEventListener("blur",function(){l.removeThrottledInputEventListener(n,it)},{once:!0})}),g.observe(".js-project-note-form",{add:function(e){e.addEventListener("keyup",at)},remove:function(e){e.removeEventListener("keyup",at)}}),We(".js-preview-note-form",(Re=x(regeneratorRuntime.mark(function e(t,n){var r,o,i,c,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.closest(t,".js-project-column"),o=a.query(r,".js-note-text",HTMLTextAreaElement),i=a.query(r,".js-note-preview"),c=void 0,e.prev=4,e.next=7,n.html();case 7:u=e.sent,c=u.html,e.next=13;break;case 11:e.prev=11,e.t0=e.catch(4);case 13:i.innerHTML="",c&&o.getAttribute("data-preview-text")===o.value&&i.appendChild(c);case 15:case"end":return e.stop()}},e,this,[[4,11]])})),function(e,t){return Re.apply(this,arguments)})),c.onFocus(".js-project-picker-field",function(e){var n=t(e,HTMLInputElement);l.addThrottledInputEventListener(n,Be),n.addEventListener("blur",function(){l.removeThrottledInputEventListener(n,Be)},{once:!0})}),g.observe(".js-select-button .js-project-picker-selection",function(e){var n=t(e,HTMLInputElement);s.changeValue(n,!0)}),g.observe("#facebox .js-project-picker-field",function(e){var n=t(e,HTMLInputElement);Be(n)}),o.on("click",".js-project-picker-tabs .js-select-menu-tab",function(e){var t=a.closest(e.currentTarget,".js-select-menu-deferred-content"),n=a.query(t,".js-project-picker-field",HTMLInputElement);Be(n)}),We(".js-project-note-form",(_e=x(regeneratorRuntime.mark(function e(t,n){var r,o,i,c,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(r=a.query(t,"textarea",HTMLTextAreaElement)).disabled=!0,(o=a.query(t,"button",HTMLButtonElement)).disabled=!0,(i=t.closest(".js-project-column"))&&a.query(i,".js-note-text").removeAttribute("data-preview-text"),c=void 0,e.prev=7,e.next=10,n.html();case 10:c=e.sent,e.next=22;break;case 13:return e.prev=13,e.t0=e.catch(7),c=e.t0.response,i&&c&&c.html&&409===c.status&&((u=a.query(i,".js-note-preview")).innerHTML="",u.appendChild(c.html)),o.disabled=!1,r.blur(),r.disabled=!1,r.focus(),e.abrupt("return");case 22:i?(a.query(i,".js-note-preview").innerHTML="",ct(i,c.html)):ut(t,c.html),r.blur(),r.disabled=!1,s.changeValue(r,""),r.focus();case 27:case"end":return e.stop()}},e,this,[[7,13]])})),function(e,t){return _e.apply(this,arguments)})),We(".js-project-column-card .js-comment-update",(Pe=x(regeneratorRuntime.mark(function e(t,n,r){var o,i,c,u,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=a.closest(t,".js-task-list-container"),i=a.closest(t,".js-project-column-card"),c=t.getAttribute("data-note-version")||"",r.headers.set("X-Note-Version",c),u=void 0,e.prev=5,e.next=8,n.json();case 8:u=e.sent,e.next=22;break;case 11:if(e.prev=11,e.t0=e.catch(5),!(u=e.t0.response)||422!==u.status||!u.json.stale){e.next=21;break}return _(u.json.message),st(o),L.updateContent(i),e.abrupt("return");case 21:throw e.t0;case 22:t.setAttribute("data-note-version",u.json.note_version),s=u.json.note,a.query(o,".js-task-list-field",HTMLTextAreaElement).value=s,a.query(i,".js-edit-note-input",HTMLTextAreaElement).textContent=s,st(o);case 29:case"end":return e.stop()}},e,this,[[5,11]])})),function(e,t,n){return Pe.apply(this,arguments)}));var lt,dt=n(function(){ie(),ue()},1);function mt(t){var n=t.currentTarget;e(n instanceof HTMLElement,"null.js:1014");var r=t.detail.name,o=n.getAttribute("data-channel");return/^projects:\d+$/.test(r)&&r!==o}function vt(e){return e.matches(".js-drag-by-handle")?"position-fixed":null}function ft(e){return e.matches(".js-drag-by-handle")?".js-project-dragger":null}function pt(e,t,n){var r=e.getBoundingClientRect().height,o=t.getBoundingClientRect(),a=n.getBoundingClientRect(),i=a.top;i+o.height+10>=r&&(i=Math.max(r-o.height-10,0));var c=a.right;null!=n.closest(".js-project-triage-pane")&&(c=Math.max(a.left-o.width-10,0)),t.style.top=i+"px",t.style.left=c+"px",t.style.right="auto"}function ht(){var e=void 0;if(document.location.hash.startsWith("#column-")&&(e=document.getElementById(document.location.hash.substr(1))),e||(e=document.querySelector(".js-project-column")),e){var t=e.getAttribute("data-id");t&&(jt(t),yt())}}function gt(e){if(document.querySelector(".js-project-page-mobile")){var t=document.createElement("a");t.href="#column-"+e,i.replaceState(null,"",t.href)}}function jt(e){var t=!0,n=!1,r=void 0;try{for(var o,a=document.querySelectorAll(".js-project-column")[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var i=o.value;i.classList.toggle("hide-sm",e!==i.getAttribute("data-id")),e===i.getAttribute("data-id")?i.setAttribute("data-active-column",""):i.removeAttribute("data-active-column")}}catch(e){n=!0,r=e}finally{try{!t&&a.return&&a.return()}finally{if(n)throw r}}var c=!0,u=!1,s=void 0;try{for(var l,d=document.querySelectorAll(".js-project-column-navigation-item")[Symbol.iterator]();!(c=(l=d.next()).done);c=!0){var m=l.value;m.classList.toggle("selected",e===m.getAttribute("data-column-id"))}}catch(e){u=!0,s=e}finally{try{!c&&d.return&&d.return()}finally{if(u)throw s}}}function yt(){var e=document.querySelector(".js-project-column-navigation-item.selected");if(e){var t=a.closest(e,".js-project-column-nav"),n=e.offsetLeft,r=e.offsetWidth,o=n+r,i=window.innerWidth;(o-t.scrollLeft>i||o<t.scrollLeft)&&(t.scrollLeft=n-i/2+r/2)}}o.on("click",".js-card-filter-clear",function(){var e=a.query(document,".js-card-filter-input",HTMLInputElement);e.value="",o.fire(e,"input")}),document.addEventListener("facebox:reveal",function(){Oe()}),o.on("click",".js-column-purpose-selector .js-navigation-item",function(e){var t=a.query(e.currentTarget,".js-column-purpose-value",HTMLInputElement);Oe(t.value)}),o.on("menu:activate",".js-column-purpose-selector",function(e){a.query(e.currentTarget,".js-column-purpose-button",HTMLButtonElement).disabled&&e.preventDefault()}),g.observe(".js-project-column-card",{add:function(e){ce(e),dt()},remove:dt}),g.observe(".js-card-filter-input",function(e){e.addEventListener("input",n(se,500)),l.addThrottledInputEventListener(e,function(){ve(e)})}),o.on("focusin",".js-card-filter-input",function(e){e.currentTarget instanceof HTMLInputElement&&ve(e.currentTarget)}),o.on("focusout:delay",".js-card-filter-input",function(){he()}),o.on("click",".js-card-filter-suggestion",function(){a.query(document,".js-card-filter-input",HTMLInputElement).focus()}),o.on("click",".js-card-filter",function(e){var t=e.currentTarget.getAttribute("data-card-filter");t&&ge(t)}),o.on("navigation:keydown",".js-card-filter-suggester",function(t){switch(e(t instanceof CustomEvent,"null.js:972"),h(t.detail.originalEvent)){case"Escape":t.preventDefault(),he();break;case"ArrowLeft":case"ArrowRight":case"Enter":he()}}),o.on("navigation:open",".js-card-filter-suggester",function(e){var t=document.querySelector(".js-card-filter-input");if(t instanceof HTMLInputElement){var n=a.query(document,".js-card-filter-suggester"),r=e.target.getAttribute("data-value")||"",i=t.value.slice(0,t.selectionEnd).replace(/\S+$/,""),c=t.value.slice(t.selectionEnd);n.classList.contains("d-none")||(e.preventDefault(),t.value=i+r+c,o.fire(t,"input"),ve(t)),he()}}),o.on("socket:message",".js-project-columns-container",(lt=x(regeneratorRuntime.mark(function t(n){var r,o,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e(n instanceof CustomEvent,"null.js:1023"),r=n.detail.data,!mt(n)){t.next=4;break}return t.abrupt("return");case 4:if(Ue===r.client_uid){t.next=13;break}return o=n.currentTarget,(a=document.querySelector(".js-project-search-form"))instanceof HTMLFormElement&&s.submit(a),t.next=10,k();case 10:J(o,r),t.next=14;break;case 13:"column_automation_updated"===r.action&&null!=r.state&&G(r.state);case 14:case"end":return t.stop()}},t,this)})),function(e){return lt.apply(this,arguments)})),document.addEventListener("socket:message",function(t){e(t instanceof CustomEvent,"null.js:1048");var n=t.detail,r=n.data,o=n.socketName;if(r&&r.is_project_activity){var a=document.querySelector(".js-project-activity-pane");a&&a.classList.add("Details--on")}o&&o.startsWith("projects:metadata:")&&(document.title=r.name)}),g.observe(".js-project-columns-drag-container",function(e){d.create(e,{animation:150,draggable:".js-project-column",filter:".js-note-text, .js-redacted-project-column-card",preventOnFilter:!1,fallbackClass:vt(e),handle:ft(e),handleReplacedDragElement:!0,group:{name:"project-column",put:!1,pull:!1},onMove:Xe,onUpdate:Ze})}),g.observe(".js-card-drag-container",function(e){d.create(e,{animation:150,draggable:".js-project-column-card",filter:".js-redacted-project-column-card",preventOnFilter:!1,fallbackClass:vt(e),fallbackOnBody:e.matches(".js-drag-by-handle"),handle:ft(e),handleReplacedDragElement:!0,group:"project-card",onAdd:Je,onUpdate:Je})}),g.observe(".js-project-search-results-drag-container",function(e){d.create(e,{sort:!1,animation:150,draggable:".js-project-column-card",fallbackClass:vt(e),fallbackOnBody:e.matches(".js-drag-by-handle"),handle:ft(e),group:{name:"project-card",put:!1,pull:!0},onAdd:Je,onUpdate:Je})}),g.observe(".js-project-column-card",function(e){if(e.getAttribute("data-card-id")){var t=e.getAttribute("data-content-type"),n=e.getAttribute("data-content-id"),r=document.getElementById("card-"+t+"-"+n);r&&r.remove()}}),g.observe(".js-client-uid-field",function(e){e.value=Ue}),o.on("toggle",".js-project-card-build-status .js-dropdown-details",function(e){var n=e.currentTarget,r=n.querySelector(".js-card-status-dropdown-menu");if(r){var o=t(document.body,HTMLElement);n.addEventListener("toggle",i),window.addEventListener("scroll",c,{capture:!0,passive:!0}),r.classList.remove("d-none"),a.query(r,".js-details-container").classList.add("open"),o.appendChild(r),pt(o,r,n)}function i(){n.open||u()}function c(e){r.contains(e.target)||u()}function u(){n.removeAttribute("open"),r.classList.add("d-none"),n.appendChild(r),n.removeEventListener("toggle",i),window.removeEventListener("scroll",c)}},{capture:!0}),o.on("click",".js-card-status-retry",Fe),g.observe(".js-project-card-build-status",{add:function(e){e.addEventListener("mouseenter",Fe,{once:!0})},remove:function(e){e.removeEventListener("mouseenter",Fe)}}),g.observe(".js-project-column[data-active-column]",{remove:function(){document.querySelector(".js-project-column[data-active-column]")||ht()}}),o.on("click",".js-project-column-navigation-item",function(t){t.preventDefault();var n=t.currentTarget.getAttribute("data-column-id");e(n,"null.js:1327"),jt(n),gt(n)}),o.on("click",".js-open-active-column-facebox",function(e){var t=document.querySelector(".js-project-column[data-active-column]");if(t){var n=t.getAttribute("data-id")||"",r=e.currentTarget.getAttribute("data-facebox-prefix")||"";f({div:r+n},"project-modal")}e.preventDefault()}),o.on("click",".js-toggle-project-edit-mode",function(e){e.currentTarget.classList.toggle("selected"),t(document.body,HTMLElement).classList.toggle("project-edit-mode")}),o.on("overlay:opened",".js-move-card-to-column-overlay",function(n){e(n instanceof CustomEvent,"null.js:1353");var r=t(n.detail.button,HTMLElement),o=a.closest(r,".js-project-column-card"),i=o.closest(".js-project-column"),c=i&&i.getAttribute("data-id"),u=a.query(n.currentTarget,".js-move-card-to-column-overlay-body"),s=a.query(n.currentTarget,".js-move-card-to-column-button-template");u.innerHTML="";var l=!0,d=!1,m=void 0;try{for(var v,f=document.querySelectorAll(".js-project-column-navigation-item")[Symbol.iterator]();!(l=(v=f.next()).done);l=!0){var p=v.value,h=p.getAttribute("data-column-id")||"",g=a.query(s.content.cloneNode(!0),".js-move-card-to-column-button");g.setAttribute("data-card-id",o.getAttribute("data-card-id")||""),g.setAttribute("data-content-id",o.getAttribute("data-content-id")||""),g.setAttribute("data-content-type",o.getAttribute("data-content-type")||""),g.setAttribute("data-column-id",h),g.setAttribute("data-change-active-column",r.getAttribute("data-change-active-column")||""),g.textContent=p.getAttribute("data-column-name")||"",g.disabled=c&&h===c,u.appendChild(g)}}catch(e){d=!0,m=e}finally{try{!l&&f.return&&f.return()}finally{if(d)throw m}}}),o.on("click",".js-move-card-to-column-button",function(t){var n=t.currentTarget.getAttribute("data-card-id"),r=t.currentTarget.getAttribute("data-content-id"),o=t.currentTarget.getAttribute("data-content-type"),a=t.currentTarget.getAttribute("data-column-id");e(a,"null.js:1383");var i=ze(n,r,o),c=document.querySelector('.js-project-column[data-id="'+a+'"] .js-project-column-cards');if(i&&c){t.currentTarget.getAttribute("data-change-active-column")&&(jt(a),gt(a),yt());var u=i.closest(".js-project-column");c.prepend(i),Ve(i,u)}}),o.on("click",".js-add-note-button",function(e){e.preventDefault();var t=document.querySelector(".js-project-column[data-active-column] .js-add-note-container .js-details-target");t&&b.toggleDetailsTarget(t)}),function(e,n){var r=void 0,o=void 0;function a(n){if(!r){var o=t(n.currentTarget,HTMLElement);switch(ye(n.key)){case"confirm":case"Space":if(o.classList.contains("js-redacted-project-column-card"))return;if(!o.classList.contains("js-keyboard-movable"))return;r=new Le(o,e,function(){r=null}),n.preventDefault();break;case"cancel":o.blur(),n.preventDefault();break;case"up":var a=o.previousElementSibling;if(a&&a.classList.contains("js-project-column-card"))t(a,HTMLElement).focus(),n.preventDefault();else{var i=o.closest(".js-project-column");i&&(t(i,HTMLElement).focus(),n.preventDefault())}break;case"down":var c=o.nextElementSibling;c&&c.classList.contains("js-project-column-card")&&(t(c,HTMLElement).focus(),n.preventDefault())}}}function i(e){if(!o&&!(e.target instanceof HTMLInputElement||e.target instanceof HTMLTextAreaElement)){var r=t(e.currentTarget,HTMLElement);switch(ye(e.key)){case"confirm":case"Space":if(!r.classList.contains("js-keyboard-movable"))return;o=new ke(r,n,function(){o=null}),e.preventDefault();break;case"cancel":r.blur(),e.preventDefault();break;case"down":var a=r.querySelector(".js-project-column-card");a&&(a.focus(),e.preventDefault());break;case"left":var i=r.previousElementSibling;i&&i.classList.contains("js-project-column")&&(t(i,HTMLElement).focus(),e.preventDefault());break;case"right":var c=r.nextElementSibling;c&&c.classList.contains("js-project-column")&&(t(c,HTMLElement).focus(),e.preventDefault())}}}c.onFocus(".js-project-column-card",function(e){if(r){if(r.isMoving(e))return;r.cancel()}e.addEventListener("keydown",a),e.addEventListener("blur",function t(){r&&r.isMoving(e)||(e.removeEventListener("blur",t),e.removeEventListener("keydown",a))})}),c.onFocus(".js-project-column",function(e){if(o){if(o.isMoving(e))return;o.cancel()}e.addEventListener("keydown",i),e.addEventListener("blur",function t(){o&&o.isMoving(e)||(e.removeEventListener("blur",t),e.removeEventListener("keydown",i))})})}(Ve,Ge),ht()});
